<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Kapittel 1 Ecosystem Accounting at NINA | README</title>
  <meta name="description" content="" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Kapittel 1 Ecosystem Accounting at NINA | README" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Kapittel 1 Ecosystem Accounting at NINA | README" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  

<link rel="next" href="targets.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>




<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Naturregnskap</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="ecosystem-accounting-at-nina.html"><a href="ecosystem-accounting-at-nina.html"><i class="fa fa-check"></i><b>1</b> Ecosystem Accounting at NINA</a>
<ul>
<li class="chapter" data-level="1.1" data-path="ecosystem-accounting-at-nina.html"><a href="ecosystem-accounting-at-nina.html#repo-structure"><i class="fa fa-check"></i><b>1.1</b> Repo structure:</a></li>
<li class="chapter" data-level="1.2" data-path="ecosystem-accounting-at-nina.html"><a href="ecosystem-accounting-at-nina.html#author-guidelines"><i class="fa fa-check"></i><b>1.2</b> Author Guidelines:</a></li>
<li class="chapter" data-level="1.3" data-path="ecosystem-accounting-at-nina.html"><a href="ecosystem-accounting-at-nina.html#ancillary-data-og-documentation"><i class="fa fa-check"></i><b>1.3</b> Ancillary data og documentation</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="targets.html"><a href="targets.html"><i class="fa fa-check"></i><b>2</b> Targets</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<!--bookdown:title:end-->
<!--bookdown:title:start-->
<div id="ecosystem-accounting-at-nina" class="section level1" number="1">
<h1><span class="header-section-number">Kapittel 1</span> Ecosystem Accounting at NINA</h1>
<p>This repo contains a worked example for how to produce and maintain an account for ecosystem extent and condition for a single municipality, in-line with the SEEA EA accounting standards. The condition account is produced via a semi-automated and reproducable workflow that is built using <a href="https://books.ropensci.org/targets/"><code>targets</code></a> and it has a strong emphasis on geographically explicit data (maps). The repo also produces a <a href="https://ninanor.github.io/naturregnskap/">Norwegian <img src="figures/book.svg" width="30" /> e-book</a> that further communicates this work to end-users in local land area planning and management. This book also collates an account for several ecosystem services.</p>
<p>The example municipality is Nordre Follo, situated in Viken county, south-eastern Norway.</p>
<div id="repo-structure" class="section level2" number="1.1">
<h2><span class="header-section-number">1.1</span> Repo structure:</h2>
<ul>
<li><p><a href=".github"><code>.github</code></a> contains the GitHub Actions workflow. Usually you’ll not need to edit anything here, unless you make use of a new package somewhere - then you need to add that package to the list.</p></li>
<li><p><a href="R"><code>R</code></a> contains R scripts that are not rendered as book chapters. This includes all the indicator documentation and analyses.</p>
<ul>
<li><a href="data/prepMetrics"><code>/prepMetrics</code></a> contains scripts that prepare the maps for metrices/variables that subsequently feeds into the targets workflow. The file write to <code>data/variables</code>.</li>
</ul></li>
<li><p><a href="data"><code>data</code></a> contains data:</p>
<ul>
<li><p><a href="data/supportingData"><code>/supportingData</code></a> contains data files that underlie the indicator analyses, such as the master raster grids.</p></li>
<li><p><a href="data/variables"><code>/variables</code></a> contains maps with variables in original units, alongside their respective reference values.</p></li>
</ul></li>
<li><p><a href="figures"><code>figures</code></a> contains images that are rendered somewhere in the book on in this readme file.</p></li>
<li><p><a href="man"><code>man</code></a> is short for manual. Contains descriptions files (if any).</p></li>
<li><p><a href="output"><code>output</code></a> contains data output (tables, maps, etc.) produced by the targets workflow.</p></li>
</ul>
<p>Book chapters are numbered rdm files. The first chapter is called <code>index.Rmd</code>.</p>
</div>
<div id="author-guidelines" class="section level2" number="1.2">
<h2><span class="header-section-number">1.2</span> Author Guidelines:</h2>
<p>This is a guide for how NINA employees can work collaboratively to write the <a href="https://ninanor.github.io/naturregnskap/"><em>Naturregnskap</em></a> book.</p>
<p><strong>Overview</strong>.
Everybody that will interact with and propose changes to the github repository will follow a workflow that involves <em>Pull Requests</em>, og PRs for short.
Admins will also do this, thus keeping the main branch and the web site stable.
Pull requests will be managed by Anders L. Kolstad.
Some users will not be comfortable with using github and these can ally with another user or contact Anders for help.</p>
<p><strong>Fork the repo</strong>.
Contributors are asked to fork the NINAnor/naturregnskap repository to their own github user account.</p>
<p><img src="figures/fork.jpg" /></p>
<p>Clone your fork down to your local computer.
Start by copying the repo’s url.
In RStudio, create a new project - from version control - from GitHub, and paste you url there.
Make you edits to this project (to the main branch or any branch).
You should not create new files (chapters) without coordinating this with Anders first.
Commit you edits and push to GitHub.
Go to the NINAnor version of the repo and perform a PR from there.</p>
<p><img src="figures/prFromFork.jpg" alt="" width="700"/></p>
<p>Now people can review your edits and suggest changes before merging them with the main branch in the NINAnor repo.
If you make new commits now, after submitting a PR, these commits will become part of the PR.
You do not need to create a new PR or delete the first one.</p>
<p>Now, importantly, every time before you start working on your forked version, you need to update it with the main <em>base</em> repository at NINAnor.
To to this, go to your forked repo at GitHub and click <em>Fetch upstream</em>.</p>
<p><img src="figures/fetchUpstream.jpg" alt="" width="700"/></p>
<p>Return to RStudio, chose your forked project, and pull down from github.</p>
<p><strong>Optional workflow based on branches</strong>.
As we are not that many collaborators, you can use <strong>branches</strong>, and not forks, for our PRs.
It is still recommended that you use forks as explained above.
If you decide to work via development branches, you can start off by cloning the repo to you local machine and initiate a new branch.
Make your edits here; commit; push; and do a PR.
Branches are deleted after every merge with the main branch.
You should then <a href="https://www.cloudbees.com/blog/git-delete-branch-how-to-for-both-local-and-remote">delete the corresponding local branch</a> as well, in RStudio.
In the shell (<code>Tools - Shell..</code>), type <code>git branch -d NAME-OF-Your-BRANCH</code>.
If you experience a build up of remote branches that you know are deleted on GitHub, you can prune them from the list in RStudio with this shell command: <code>git fetch -p</code>.
Checkout the main branch and to a pull before creating another development branch.</p>
<p>To work using branches, before starting, make sure you’re added to the github repo with write admissions.
Email Anders Kolstad for help.</p>
<p><strong>Local serving and Continous Integration using GitHub Actions</strong>.
You can set up a live rendering (visualisation) that shows how your edits will look like when published. See <code>R/serve.R</code>.
You do not need to render html-files locally.
Just save the .Rmd files you are working on.
A GitHub actions workflow is set up for continuous integration, meaning the Rmd-files are rendered to html on a github-hosted server.
These are then put in the gh-pages branch that hosts the web site.
In case you for some reason decided to render the book locally you can delete everything again, all the html and md files, using the <code>clean_book()</code> function.</p>
<p>When you’re happy with your edits you can commit you changes (should be done quite frequently anyways) and push to the remote (i.e. GitHub) and then you create a <strong>pull request</strong> <a href="https://github.com/NINAnor/naturregnskap/pulls">here</a>.
The moderator (currently Anders L. Kolstad) will need to accept the edits before the are merged to the main branch and published online in the book.</p>
</div>
<div id="ancillary-data-og-documentation" class="section level2" number="1.3">
<h2><span class="header-section-number">1.3</span> Ancillary data og documentation</h2>
<p>All the work that goes into the ecosystem account should be documented somewhere in this repo.
All background analyses should be in English, and all the text that shows in the book should be in Norwegian.
If you are working on something like an indicator for ecological condition, you can have an rmd-file in <code>R/conditionIndicators</code> and then render these to pdf if you like and put them in a subfolder <code>R/conditionIndicators/pdfOutput</code>.
You can then link to the pdf when writing about this indicator inside the book.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>

<a href="targets.html" class="navigation navigation-next navigation-unique" aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/%s",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": false,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
